# 上线前

## 基础测试建设

​		测试流程、日常工作规范、日报报告模板、周报模板、用例编写粒度规范(ui)、用例评审标准(接口、ui)、核心功能业务场景梳理和维护机制、公共用例梳理(接口、ui)、测试准入标准、上线标准(接口、ui)、bug录入规范(接口、ui)、探索测试标准

- ​				测试数据：测试账号维护、业务数据维护

- ​				测试环境：环境建设、管理和维护、业务测试部署规范

## 测试质量管理

### 提测准入标准

- ​		提测交付物清单
- ​		单元测试
- ​		设计评审
- ​		code review
- ​		静态代码扫描
- ​		自测标准(接口、ui)		

### 提测质量度量

- ​		功能
- ​		性能
- ​		安全
- ​		兼容性
- ​		稳定性
- ​		接口（测试分层）

## 测试效率提升

- ​		提测质量控制
- ​		测试过程受阻减少
- ​		沟通机制
- ​		敏捷
- ​		CI、CD
- ​		devops
- ​		TDD
- ​		日常受阻问题解决沉淀
- ​		流程改进-简易上线、产品review介入时间
- ​		测试过程管理

## 测试技术改进

- ​		bug快速定位
- ​		接口自动化测试框架
- ​		性能测试（工具）
- ​		接口测试平台-支持bmw、graphql、java
- ​		mock
- ​		平台化/服务化/通用化/可视化
- ​		测试效率度量

# 上线中

## 预发验证



## 用户Beta测试



## 分级发布

# 上线后



## 监控体系

- ​		业务监控体系：核心业务，下单、支付，红包等
- ​		信息收集体系：用户行为、使用环境、使用场景、crash、ANR、性能埋点
- ​		功能巡检体系：通过web和接口监控系统级功能、业务场景
- ​		系统监控体系：系统资源、硬件、中间件、数据库
- ​		网络监控体系：网络带宽、DNS、路由、网络设备
- ​		用户反馈问题收集、确认、修复/优化体系

## 灾备

​		

# 团队建设

## 新人培养

- ​		新人指南
- ​		阶段性目标制定
- ​		新人导师制

## 老人培养

- ​		业务轮岗
- ​		测试类型扩展

## 文化氛围塑造

- ​		执行力
- ​		向心力

# 上线规范

- ​		总纲：所有的上线都必需有上线文档，必须经过测试同学确认。


## 0 进入预发时间

- 周一 09:30~15:30 
- 周三 09:30~15:30

> 超过 **15:30** 未进入预发的项目顺延到下一个窗口

> 超过 **16:00** 在预发未验证成功的项目主动回撤代码并顺延到下一个窗口

## 1 上线窗口

- 周二 07:30~08:30
- 周四 07:30~08:30 

> **9:00** 遇到线上故障,由业务线leader决定是否回滚



## 2 紧急上线

任何非上线窗口的上线都需要经过审批并会记录在案，后期会进行回顾，确定产生的原因，例如代码问题、产品逻辑等。

## 3 上线巡检

每次上线完成后，除了密切关注被动报警信息（短信、邮件），开发人员须进行主动上线巡检，主要从如下几个维度：

- 基础监控

- JVM运行时监控

- 性能趋势

- kibana 异常日志 

- 业务监控：订单环比


上线完成后的主动巡检时间段应包括：

- 上线完成后的1小时之内
- 业务高峰，例如10~11点、14~15点

# 线上故障处理流程

​		业务Owner     

​		召集处理小组

​		是否止损

​		止损方案

​		故障分析

​		解决方案

​		回顾总结

# 事故模板

## 0. 现象

​		阐述XXX发生了XXX导致XXX

## 1. 处理过程

​		时间：11:XX ~ XX:XX

​		人员：陈XX、刘XX

​		一开始主要从数据层面分析原因，花费了大约X小时时间

​		XXX根本原因

​		XXX验证和复现了问题

## 2. 原因

### 业务层面

- 从XXX
- 到XXX
- 然后XXX
- XXXX

### 技术层面

- 原因一
  - 数据模拟
    - XXX
  - XXX
  - XXX
  - XXX
- 原因二
  - 数据模拟
    - XXX
  - XXX
  - XXX
  - XXX
  - XXX
  - XXX
- 本质原因
  - XXX
  - XXX

## 3. 影响

截止目前（XX：00）影响用户XXX人，订单XX单，金额损失XXX。

## 4. 解决方案

  -  已经上线（XXX：00）
  - 发送短信给受影响的用户XXX（未执行）
  - 后续
    - XXX
    - XXX

## 5. 总结

### 错误排查

- XXX一个报错带偏了，花费了较多时间进行排查
- 通过重现问题的方式来快速定位线上问题的本质原因
- XXX体系的数据结构比较复杂，通过数据定位问题很困难
- 前端没有biglog帮助快速回放用户全部交互过程及数据
- 核心页面的关键参数含义不是所有人都清楚，无快速解读的工具
- 大家一起分析，贡献各自的信息是一个好的解决问题的方式
- 没搞清问题，不要修改数据，依赖太多，改了也可能出新问题

### 数据模型

- 梳理现有各种XXX模式和场景
- 自顶向下来进行评估和设计